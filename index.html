<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Game Budaya Indonesia – Kerangka Admin + User</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
<div class="container">
  <header class="row" style="justify-content:space-between;margin-bottom:14px">
    <div>
      <h1>🎲 Game Budaya Indonesia</h1>
    </div>
    <div class="row">
      <button id="btn-home" class="btn-soft">🏠 Beranda</button>
      <button id="btn-admin" class="btn">⚙️ Admin</button>
    </div>
  </header>

  <!-- ============ PAGE: LANDING (User) ============ -->
  <section id="page-landing" class="page active">
    <div class="card pad" style="text-align:center">
      <h2>Selamat Datang! 👋</h2>
      <p>Jawab kuis, dan untuk setiap jawaban benar kamu akan menyusun puzzle gambar rumah adat terkait.</p>
      <div class="row" style="justify-content:center">
        <button id="btn-start-quiz" class="btn-primary">▶️ Mulai Kuis</button>
        <select id="sel-direct-house"></select>
        <button id="btn-start-direct" class="btn-dark">🧩 Main Puzzle</button>
      </div>
      <p class="small muted" style="margin-top:8px">Jika daftar kosong, buka <strong>⚙️ Admin</strong> untuk menambah data.</p>
    </div>
  </section>

  <!-- ============ PAGE: QUIZ (User) ============ -->
  <section id="page-quiz" class="page">
    <div class="row" style="justify-content:space-between;margin-bottom:8px">
      <div><strong>Kuis Rumah Adat</strong> <span class="badge" id="quiz-progress"></span></div>
      <div class="row">
        <span class="small muted">Jml soal:</span>
        <select id="quiz-length" title="Jumlah soal per sesi">
          <option>3</option><option selected>5</option><option>7</option><option>10</option>
        </select>
        <button id="btn-exit-quiz" class="btn-soft">Kembali</button>
      </div>
    </div>
    <div id="quiz-box" class="q-card"></div>
  </section>

  <!-- ============ PAGE: PUZZLE (User) ============ -->
  <section id="page-puzzle" class="page">
    <div class="row" style="justify-content:space-between;margin-bottom:8px">
      <button id="btn-back-quiz" class="btn-soft">⬅️ Kembali ke Kuis</button>
      <div id="puzzle-title" class="muted"></div>
    </div>
    <main class="grid">
      <section>
        <div class="card pad board-wrap">
          <div id="board" class="board" aria-label="papan-puzzle"></div>
          <div id="win" class="overlay-win" style="display:none">
            <div class="card pad" style="max-width:560px;text-align:center">
              <h3>Benar! Puzzle selesai 🎉</h3>
              <div class="muted" id="win-stats">Langkah: 0 • Waktu: 00:00.00</div>
              <div id="history" class="history" style="text-align:left;margin-top:10px"></div>
              <div class="row" style="justify-content:center;margin-top:8px">
                <button id="btn-again" class="btn-primary">Mainkan Lagi</button>
                <button id="btn-next-question" class="btn-dark">Lanjut Soal</button>
              </div>
            </div>
          </div>
          <img id="hint" alt="Hint" style="position:absolute;inset:0;width:100%;height:100%;object-fit:cover;opacity:.18;pointer-events:none;display:none" />
        </div>
        <div class="row" style="margin-top:10px">
          <button id="btn-shuffle" class="btn-primary">Acak & Mulai</button>
          <button id="btn-hint" class="btn-dark">👀 Hint</button>
          <button id="btn-reset" class="btn-soft">🔁 Rapikan</button>
          <div style="margin-left:auto">⏱️ <span id="time" style="font-family:ui-monospace,Menlo,Consolas,monospace">00:00.00</span> • 👣 <strong id="moves">0</strong> • 🏆 <span id="best-label">3×3</span>: <strong id="best">–</strong></div>
        </div>
      </section>
      <aside>
        <div class="card pad orig">
          <h3 style="margin:0 0 6px">🖼️ Gambar Asli</h3>
          <img id="original" alt="Gambar asli" />
          <div id="credit" class="small muted" style="margin-top:6px"></div>
        </div>
        <div class="card pad" style="margin-top:12px">
          <h3 style="margin:0 0 6px">Cara Main</h3>
          <ol style="padding-left:22px;margin:.25rem 0">
            <li>Klik <em>Acak & Mulai</em>. Pindahkan keping bersebelahan dengan kotak kosong.</li>
            <li>Gunakan <em>Hint</em> jika perlu.</li>
            <li>Susun hingga sama seperti gambar asli.</li>
          </ol>
        </div>
      </aside>
    </main>
  </section>

  <!-- ============ PAGE: ADMIN ============ -->
  <section id="page-admin" class="page">
    <div class="row" style="justify-content:space-between;margin-bottom:10px">
      <h2 style="margin:0">⚙️ Admin</h2>
      <div class="row small muted">Versi data: <span id="db-version">1</span></div>
    </div>

    <!-- Login simple -->
    <div id="admin-login" class="card pad" style="margin-bottom:12px">
      <div class="row">
        <label for="admin-pass" class="muted">Kode Admin:</label>
        <input id="admin-pass" type="password" class="input" style="max-width:200px" placeholder="mis. 1234" />
        <button id="admin-login-btn" class="btn-primary">Masuk</button>
        <span class="small muted">(bisa diubah di Pengaturan)</span>
      </div>
    </div>

    <div id="admin-panel" style="display:none">
      <div class="admin-grid">
        <nav class="card pad" style="height:fit-content">
          <div class="row" style="gap:6px;flex-wrap:wrap">
            <button data-tab="houses" class="btn-soft" id="tab-houses">🏠 Rumah Adat</button>
            <button data-tab="questions" class="btn-soft" id="tab-questions">📝 Pertanyaan</button>
            <button data-tab="settings" class="btn-soft" id="tab-settings">⚙️ Pengaturan</button>
          </div>
          <hr style="margin:12px 0;border:none;border-top:1px dashed #eee" />
          <div class="row">
            <button id="btn-export" class="btn">⬇️ Ekspor JSON</button>
            <label for="file-import" class="btn" style="cursor:pointer">⬆️ Impor JSON</label>
            <input id="file-import" type="file" accept="application/json" style="display:none" />
          </div>
        </nav>

        <div id="admin-content">
          <!-- Tab: Houses -->
          <div id="tabc-houses" class="card pad">
            <div class="row" style="justify-content:space-between;align-items:flex-end">
              <div>
                <h3 style="margin:0 0 6px">🏠 Kelola Rumah Adat</h3>
                <div class="small muted">Buat entri rumah (nama, path gambar, kredit, sejarah & ukuran). Pertanyaan kuis akan menunjuk ke salah satu rumah.</div>
              </div>
              <button id="house-new" class="btn-primary">＋ Tambah Rumah</button>
            </div>
            <div id="house-form" style="display:none;margin-top:10px">
              <div class="row" style="gap:10px;align-items:flex-start;flex-wrap:wrap">
                <div style="flex:1;min-width:260px">
                  <input id="h-id" type="hidden" />
                  <label class="muted">Nama Rumah</label>
                  <input id="h-name" class="input" placeholder="mis. Rumah Gadang" />
                  <label class="muted" style="margin-top:6px;display:block">Kredit/Sumber</label>
                  <input id="h-credit" class="input" placeholder="Foto: ... / Sumber: ..." />
                  <label class="muted" style="margin-top:6px;display:block">Sejarah/Deskripsi</label>
                  <textarea id="h-history" class="input" rows="5" placeholder="tulis 2–6 paragraf pendek"></textarea>
                  <div class="row" style="margin-top:6px">
                    <label class="muted">Ukuran Puzzle</label>
                    <select id="h-size" class="input" style="max-width:120px"><option value="3">3×3</option><option value="4">4×4</option><option value="5">5×5</option></select>
                  </div>
                  <div class="row" style="margin-top:6px">
                    <button id="h-save" class="btn-primary">💾 Simpan</button>
                    <button id="h-cancel" class="btn-soft">Batal</button>
                  </div>
                </div>
                <div style="width:280px">
                  <div class="muted">Path/Nama File Gambar</div>
                  <input id="h-img-path" class="input" placeholder="mis. img/nama-gambar.jpg" />
                  <div class="small muted">Pastikan gambar sudah diupload ke folder 'img'.</div>
                </div>
              </div>
            </div>
            <div id="houses-list" style="margin-top:10px"></div>
          </div>

          <!-- Tab: Questions -->
          <div id="tabc-questions" class="card pad" style="display:none">
            <div class="row" style="justify-content:space-between;align-items:flex-end">
              <div>
                <h3 style="margin:0 0 6px">📝 Kelola Pertanyaan Kuis</h3>
                <div class="small muted">Setiap pertanyaan harus menunjuk ke Rumah Adat (target puzzle) & punya jawaban benar.</div>
              </div>
              <button id="q-new" class="btn-primary">＋ Tambah Pertanyaan</button>
            </div>

            <div id="q-form" style="display:none;margin-top:10px">
              <input id="q-id" type="hidden" />
              <label class="muted">Teks Pertanyaan</label>
              <textarea id="q-text" class="input" rows="3" placeholder="Tulis pertanyaan…"></textarea>
              <div class="row" style="margin-top:6px">
                <input id="q-a" class="input" placeholder="Pilihan A" />
                <input id="q-b" class="input" placeholder="Pilihan B" />
              </div>
              <div class="row" style="margin-top:6px">
                <input id="q-c" class="input" placeholder="Pilihan C" />
                <input id="q-d" class="input" placeholder="Pilihan D" />
              </div>
              <div class="row" style="margin-top:6px">
                <label class="muted">Jawaban Benar</label>
                <select id="q-answer" class="input" style="max-width:120px">
                  <option value="0">A</option><option value="1">B</option><option value="2">C</option><option value="3">D</option>
                </select>
                <label class="muted">Target Rumah</label>
                <select id="q-target" class="input" style="max-width:280px"></select>
              </div>
              <div class="row" style="margin-top:6px">
                <button id="q-save" class="btn-primary">💾 Simpan</button>
                <button id="q-cancel" class="btn-soft">Batal</button>
              </div>
            </div>

            <div id="questions-list" style="margin-top:10px"></div>
          </div>

          <!-- Tab: Settings -->
          <div id="tabc-settings" class="card pad" style="display:none">
            <h3 style="margin:0 0 6px">⚙️ Pengaturan</h3>
            <div class="row" style="margin:6px 0">
              <label class="muted">Kode Admin</label>
              <input id="set-admin" class="input" style="max-width:200px" placeholder="1234" />
              <button id="set-save" class="btn-primary">Simpan</button>
            </div>
            <div class="row" style="margin:6px 0">
              <label class="muted">Jumlah Soal per Sesi (default)</label>
              <select id="set-quizlen" class="input" style="max-width:120px"><option>3</option><option selected>5</option><option>7</option><option>10</option></select>
              <button id="set-apply" class="btn">Terapkan</button>
            </div>
            <hr style="margin:12px 0;border:none;border-top:1px dashed #eee" />
            <button id="set-reset" class="btn" style="color:#b91c1c">🗑️ Reset Semua Data (kosongkan)</button>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>

<script src="js/script.js"></script>
</body>
</html>
